# render.yaml — Fixed version for SkillArena

services:
  # 1️⃣ Backend — FastAPI
  - type: web
    name: skillarena-backend
    env: docker
    rootDir: backend
    dockerfilePath: backend/Dockerfile
    autoDeploy: true
    envVars:
      - key: PORT
        value: 8000
      - key: DATABASE_URL
        value: sqlite:///./skillarena.db
      - key: SECRET_KEY
        value: "supersecretkey123"
      - key: ADMIN_EMAIL
        value: "admin@skillarena.com"
      - key: ADMIN_PASSWORD
        value: "SkillArena@2025"
      - key: ALLOWED_HOSTS
        value: "*"

  # 2️⃣ Frontend — React
  - type: web
    name: skillarena-frontend
    env: docker
    rootDir: frontend
    dockerfilePath: frontend/Dockerfile
    autoDeploy: true
    envVars:
      - key: REACT_APP_API
        fromService:
          type: web
          name: skillarena-backend
          envVarKey: RENDER_EXTERNAL_URL

